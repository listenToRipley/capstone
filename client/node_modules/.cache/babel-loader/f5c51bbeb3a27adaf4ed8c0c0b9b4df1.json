{"ast":null,"code":"const mysql = require('mysql');\n\nconst pool = require('../../../sql/connection');\n\nconst {\n  handleSQLError\n} = require('../../../sql/error'); //POST\n\n\nconst updatePalListName = (req, res) => {\n  const {\n    title\n  } = req.body;\n  sql = 'UPDATE palListsSettings SET palListName=? WHERE owner=?';\n  sql = mysql.format(sql, [title, req.user]);\n  pool.query(sql, (err, results) => {\n    if (err) return handleSQLError(res, err);\n    return res.status(204).json();\n  });\n}; //PUT\n\n\nconst updatePalRole = (req, res) => {\n  const {\n    accessId\n  } = req.params;\n  const {\n    role\n  } = req.body;\n  sql = 'UPDATE access SET pantryRole=COALESCE(?, pantryRole), shopListRole=pantryRole WHERE accessId=?';\n  sql = mysql.format(sql, [role, accessId]);\n  pool.query(sql, (err, results) => {\n    if (err) return handleSQLError(res, err);\n    return res.status(204).json();\n  });\n};\n\nmodule.exports = {\n  updatePalListName,\n  updatePalRole\n};","map":{"version":3,"sources":["/Users/moonbox/Documents/capstone/pantrypal/controller/appFunc/palLists/settings.js"],"names":["mysql","require","pool","handleSQLError","updatePalListName","req","res","title","body","sql","format","user","query","err","results","status","json","updatePalRole","accessId","params","role","module","exports"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,yBAAD,CAApB;;AACA,MAAM;AAACE,EAAAA;AAAD,IAAmBF,OAAO,CAAC,oBAAD,CAAhC,C,CAEA;;;AACA,MAAMG,iBAAiB,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAEtC,QAAM;AAACC,IAAAA;AAAD,MAAUF,GAAG,CAACG,IAApB;AAEAC,EAAAA,GAAG,GAAC,yDAAJ;AAEAA,EAAAA,GAAG,GAACT,KAAK,CAACU,MAAN,CAAaD,GAAb,EAAkB,CAACF,KAAD,EAAQF,GAAG,CAACM,IAAZ,CAAlB,CAAJ;AAEAT,EAAAA,IAAI,CAACU,KAAL,CAAWH,GAAX,EAAgB,CAACI,GAAD,EAAMC,OAAN,KAAkB;AAChC,QAAID,GAAJ,EAAS,OAAOV,cAAc,CAACG,GAAD,EAAMO,GAAN,CAArB;AACT,WAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,EAAP;AACD,GAHD;AAKD,CAbD,C,CAeA;;;AACA,MAAMC,aAAa,GAAG,CAACZ,GAAD,EAAMC,GAAN,KAAc;AAElC,QAAM;AAACY,IAAAA;AAAD,MAAab,GAAG,CAACc,MAAvB;AACA,QAAM;AAACC,IAAAA;AAAD,MAASf,GAAG,CAACG,IAAnB;AAEAC,EAAAA,GAAG,GAAE,gGAAL;AAEAA,EAAAA,GAAG,GAACT,KAAK,CAACU,MAAN,CAAaD,GAAb,EAAkB,CAACW,IAAD,EAAMF,QAAN,CAAlB,CAAJ;AAEAhB,EAAAA,IAAI,CAACU,KAAL,CAAWH,GAAX,EAAgB,CAACI,GAAD,EAAMC,OAAN,KAAkB;AAChC,QAAGD,GAAH,EAAQ,OAAOV,cAAc,CAACG,GAAD,EAAMO,GAAN,CAArB;AACR,WAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,EAAP;AACD,GAHD;AAKD,CAdD;;AAiBAK,MAAM,CAACC,OAAP,GAAiB;AACflB,EAAAA,iBADe;AAEfa,EAAAA;AAFe,CAAjB","sourcesContent":["const mysql = require('mysql')\nconst pool = require('../../../sql/connection')\nconst {handleSQLError} = require('../../../sql/error')\n\n//POST\nconst updatePalListName = (req, res) => {\n\n  const {title} = req.body\n\n  sql='UPDATE palListsSettings SET palListName=? WHERE owner=?'\n\n  sql=mysql.format(sql, [title, req.user])\n\n  pool.query(sql, (err, results) => {\n    if (err) return handleSQLError(res, err)\n    return res.status(204).json();\n  })\n\n}\n\n//PUT\nconst updatePalRole = (req, res) => {\n  \n  const {accessId} = req.params\n  const {role} = req.body\n\n  sql= 'UPDATE access SET pantryRole=COALESCE(?, pantryRole), shopListRole=pantryRole WHERE accessId=?'\n\n  sql=mysql.format(sql, [role,accessId])\n\n  pool.query(sql, (err, results) => {\n    if(err) return handleSQLError(res, err)\n    return res.status(204).json()\n  })\n\n}\n\n\nmodule.exports = {\n  updatePalListName,\n  updatePalRole\n}"]},"metadata":{},"sourceType":"script"}