{"ast":null,"code":"import _regeneratorRuntime from\"/Users/moonbox/Documents/capstone/pantrypal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/moonbox/Documents/capstone/pantrypal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/moonbox/Documents/capstone/pantrypal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{USER_DETAILS}from'./types';import moment from'moment';export var getDetails=function getDetails(pass,user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var path,intake,res,getResult,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:path=\"/postLogin/\".concat(user.username,\"/current/info\");intake=pass.token;_context.prev=2;_context.next=5;return fetch(path,{method:'GET',headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",token:\"\".concat(intake)}});case 5:res=_context.sent;_context.next=8;return res.json();case 8:getResult=_context.sent;result=_objectSpread({},getResult);dispatch({type:USER_DETAILS,payload:{userDetails:{username:result[0].username,pantryId:result[0].pantrySettingId,shopListId:result[0].shopListSetId,palListId:result[0].palListSettingsId,accessId:result[0].accessId,time:moment(),run:true}}});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);return _context.abrupt(\"return\",('what the error the user details? ',{e:_context.t0}));case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/moonbox/Documents/capstone/pantrypal/client/src/redux/actions/userDetails.js"],"names":["USER_DETAILS","moment","getDetails","pass","user","dispatch","path","username","intake","token","fetch","method","headers","Accept","res","json","getResult","result","type","payload","userDetails","pantryId","pantrySettingId","shopListId","shopListSetId","palListId","palListSettingsId","accessId","time","run","e"],"mappings":"ufAAA,OAAQA,YAAR,KAA2B,SAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,CAAOC,IAAP,iGAAgB,iBAAMC,QAAN,uJACpCC,IADoC,sBACfF,IAAI,CAACG,QADU,kBAEpCC,MAFoC,CAE3BL,IAAI,CAACM,KAFsB,uCAKpBC,CAAAA,KAAK,CAACJ,IAAD,CAAO,CAC1BK,MAAM,CAAE,KADkB,CAE1BC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CACqB,eAAgB,kBADrC,CAEPJ,KAAK,WAAKD,MAAL,CAFE,CAFiB,CAAP,CALe,QAKhCM,GALgC,qCAadA,CAAAA,GAAG,CAACC,IAAJ,EAbc,QAahCC,SAbgC,eAchCC,MAdgC,kBAcnBD,SAdmB,EAepCX,QAAQ,CAAC,CACPa,IAAI,CAAElB,YADC,CAELmB,OAAO,CAAE,CACPC,WAAW,CAAE,CACXb,QAAQ,CAAEU,MAAM,CAAC,CAAD,CAAN,CAAUV,QADT,CAEXc,QAAQ,CAAEJ,MAAM,CAAC,CAAD,CAAN,CAAUK,eAFT,CAGXC,UAAU,CAAEN,MAAM,CAAC,CAAD,CAAN,CAAUO,aAHX,CAIXC,SAAS,CAAER,MAAM,CAAC,CAAD,CAAN,CAAUS,iBAJV,CAKXC,QAAQ,CAAEV,MAAM,CAAC,CAAD,CAAN,CAAUU,QALT,CAMXC,IAAI,CAAC3B,MAAM,EANA,CAOX4B,GAAG,CAAE,IAPM,CADN,CAFJ,CAAD,CAAR,CAfoC,kHA8B7B,oCAAqC,CAACC,CAAC,YAAF,CA9BR,wEAAhB,gEAAnB","sourcesContent":["import {USER_DETAILS} from './types'\nimport moment from 'moment'\n\nexport const getDetails = (pass, user) => async dispatch => {\n  let path = `/postLogin/${user.username}/current/info`\n  let intake = pass.token\n\n  try{\n      let res = await fetch(path, {\n        method: 'GET',\n        headers: {\n          Accept: \"application/json\", \"Content-Type\": \"application/json\",\n          token: `${intake}`,\n        }\n      }\n      )\n      let getResult = await res.json()\n      let result = {...getResult}\n      dispatch({\n        type: USER_DETAILS,\n          payload: {\n            userDetails: {\n              username: result[0].username,\n              pantryId: result[0].pantrySettingId, \n              shopListId: result[0].shopListSetId, \n              palListId: result[0].palListSettingsId, \n              accessId: result[0].accessId,\n              time:moment(),\n              run: true\n            }\n          }\n      })\n    } catch (e) {\n      return 'what the error the user details? ', {e}\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}