{"ast":null,"code":"const mysql = require('mysql');\n\nconst pool = require('../../../sql/connection');\n\nconst {\n  handleSQLError\n} = require('../../../sql/error'); //items related to merges \n//GET\n\n\nconst mergeStatus = (req, res) => {\n  //the mergerRequester or mergePal = to user\n  let sql = 'SELECT * FROM mergeRequests WHERE approved=1 AND requester=? OR mergePal=?';\n  sql = mysql.format(sql, [req.user, req.user]);\n  pool.query(sql, (err, row) => {\n    if (err) return handleSQLError(res, err);\n    let total = row.length;\n\n    if (total === 0) {\n      return res.send('There are not current merges for this user');\n    } else {\n      return res.json(row);\n    }\n  });\n};\n\nmodule.exports = {\n  mergeStatus\n};","map":{"version":3,"sources":["/Users/moonbox/Documents/capstone/pantrypal/controller/appFunc/merge/mergeStatus.js"],"names":["mysql","require","pool","handleSQLError","mergeStatus","req","res","sql","format","user","query","err","row","total","length","send","json","module","exports"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,yBAAD,CAApB;;AACA,MAAM;AAACE,EAAAA;AAAD,IAAmBF,OAAO,CAAC,oBAAD,CAAhC,C,CACA;AAEA;;;AACA,MAAMG,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChC;AAEA,MAAIC,GAAG,GAAC,4EAAR;AAEAA,EAAAA,GAAG,GAACP,KAAK,CAACQ,MAAN,CAAaD,GAAb,EAAkB,CAACF,GAAG,CAACI,IAAL,EAAWJ,GAAG,CAACI,IAAf,CAAlB,CAAJ;AAEAP,EAAAA,IAAI,CAACQ,KAAL,CAAWH,GAAX,EAAgB,CAACI,GAAD,EAAMC,GAAN,KAAc;AAC5B,QAAGD,GAAH,EAAQ,OAAOR,cAAc,CAACG,GAAD,EAAMK,GAAN,CAArB;AACR,QAAIE,KAAK,GAAGD,GAAG,CAACE,MAAhB;;AACA,QAAID,KAAK,KAAG,CAAZ,EAAe;AACb,aAAOP,GAAG,CAACS,IAAJ,CAAS,4CAAT,CAAP;AACD,KAFD,MAEO;AACL,aAAOT,GAAG,CAACU,IAAJ,CAASJ,GAAT,CAAP;AACD;AACF,GARD;AAUD,CAjBD;;AAmBAK,MAAM,CAACC,OAAP,GAAiB;AACfd,EAAAA;AADe,CAAjB","sourcesContent":["const mysql = require('mysql')\nconst pool = require('../../../sql/connection')\nconst {handleSQLError} = require('../../../sql/error')\n//items related to merges \n\n//GET\nconst mergeStatus = (req, res) => {\n  //the mergerRequester or mergePal = to user\n\n  let sql='SELECT * FROM mergeRequests WHERE approved=1 AND requester=? OR mergePal=?'\n\n  sql=mysql.format(sql, [req.user, req.user])\n\n  pool.query(sql, (err, row) => {\n    if(err) return handleSQLError(res, err)\n    let total = row.length\n    if (total===0) {\n      return res.send('There are not current merges for this user')\n    } else {\n      return res.json(row); \n    }\n  })\n\n}\n\nmodule.exports = {\n  mergeStatus\n}"]},"metadata":{},"sourceType":"script"}